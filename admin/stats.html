<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统计分析 - 月光云海博客管理系统</title>
    <link rel="stylesheet" href="../assets/css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>月光云海</h2>
            <p>博客管理系统</p>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li><a href="dashboard.html"><i class="fas fa-home"></i> 仪表盘</a></li>
                <li><a href="articles.html"><i class="fas fa-newspaper"></i> 文章管理</a></li>
                <li><a href="comments.html"><i class="fas fa-comments"></i> 评论管理</a></li>
                <li><a href="stats.html" class="active"><i class="fas fa-chart-line"></i> 统计分析</a></li>
                <li><a href="chatbot.html"><i class="fas fa-robot"></i> 聊天机器人</a></li>
                <li><a href="profile.html"><i class="fas fa-user"></i> 个人信息</a></li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> 退出登录</a>
        </div>
    </div>

    <div class="main-content">
        <div class="admin-header">
            <div class="header-left">
                <button class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h2>统计分析</h2>
            </div>
            <div class="header-right">
                <div class="filter-group">
                    <select id="category-filter" class="filter-select">
                        <option value="all">所有分类</option>
                    </select>
                    <select id="tag-filter" class="filter-select">
                        <option value="all">所有标签</option>
                    </select>
                </div>
                <div class="chart-type-selector">
                    <button class="chart-type-btn active" data-type="line">
                        <i class="fas fa-chart-line"></i>
                    </button>
                    <button class="chart-type-btn" data-type="bar">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="chart-type-btn" data-type="area">
                        <i class="fas fa-chart-area"></i>
                    </button>
                </div>
                <div class="export-controls">
                    <select id="export-format" class="filter-select">
                        <option value="json">JSON</option>
                        <option value="csv">CSV</option>
                        <option value="excel">Excel</option>
                    </select>
                    <button id="export-data" class="preview-btn">
                        <i class="fas fa-download"></i> 导出数据
                    </button>
                </div>
                <div class="period-selector">
                    <select id="period-select">
                        <option value="week">最近一周</option>
                        <option value="month" selected>最近一月</option>
                        <option value="year">最近一年</option>
                        <option value="custom">自定义</option>
                    </select>
                    <div id="custom-date-range" class="custom-date-range" style="display: none;">
                        <input type="date" id="date-start" class="date-input">
                        <span>至</span>
                        <input type="date" id="date-end" class="date-input">
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <!-- 总体统计 -->
            <div class="stats-card">
                <h3>总体统计</h3>
                <div class="stats-overview">
                    <div class="stat-item">
                        <i class="fas fa-file-alt"></i>
                        <div class="stat-details">
                            <span class="stat-value" id="total-articles">0</span>
                            <span class="stat-label">文章总数</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-eye"></i>
                        <div class="stat-details">
                            <span class="stat-value" id="total-views">0</span>
                            <span class="stat-label">总浏览量</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-heart"></i>
                        <div class="stat-details">
                            <span class="stat-value" id="total-likes">0</span>
                            <span class="stat-label">总点赞数</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-comment"></i>
                        <div class="stat-details">
                            <span class="stat-value" id="total-comments">0</span>
                            <span class="stat-label">总评论数</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 趋势分析 -->
            <div class="stats-card">
                <h3>趋势分析</h3>
                <div class="chart-controls">
                    <div class="metric-toggles">
                        <label class="metric-toggle">
                            <input type="checkbox" value="views" checked> 浏览量
                        </label>
                        <label class="metric-toggle">
                            <input type="checkbox" value="likes"> 点赞数
                        </label>
                        <label class="metric-toggle">
                            <input type="checkbox" value="comments"> 评论数
                        </label>
                    </div>
                    <div class="chart-settings">
                        <select id="time-granularity" class="filter-select">
                            <option value="hour">按小时</option>
                            <option value="day" selected>按天</option>
                            <option value="week">按周</option>
                            <option value="month">按月</option>
                        </select>
                        <div class="comparison-controls">
                            <label class="compare-toggle">
                                <input type="checkbox" id="enable-comparison"> 启用数据对比
                            </label>
                            <select id="comparison-type" disabled>
                                <option value="yoy">同比</option>
                                <option value="mom">环比</option>
                                <option value="custom">自定义</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="trends-chart"></canvas>
                </div>
            </div>

            <!-- 热门文章 -->
            <div class="stats-card">
                <h3>热门文章</h3>
                <div class="popular-articles-header">
                    <div class="articles-filter">
                        <select id="popular-metric" class="filter-select">
                            <option value="views">按浏览量</option>
                            <option value="likes">按点赞数</option>
                            <option value="comments">按评论数</option>
                            <option value="composite">综合排序</option>
                        </select>
                        <select id="time-range" class="filter-select">
                            <option value="day">24小时内</option>
                            <option value="week">近7天</option>
                            <option value="month" selected>近30天</option>
                            <option value="all">全部时间</option>
                        </select>
                    </div>
                    <div class="articles-display">
                        <select id="display-count" class="filter-select">
                            <option value="5">显示5篇</option>
                            <option value="10" selected>显示10篇</option>
                            <option value="20">显示20篇</option>
                        </select>
                        <button id="refresh-popular" class="icon-btn">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="popular-articles" id="popular-articles">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> 加载中...
                    </div>
                </div>
            </div>

            <!-- 分类统计 -->
            <div class="stats-card">
                <h3>分类统计</h3>
                <div class="chart-container">
                    <canvas id="categories-chart"></canvas>
                </div>
            </div>

            <!-- 标签云 -->
            <div class="stats-card">
                <h3>标签统计</h3>
                <div class="tag-cloud" id="tag-cloud">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> 加载中...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/admin/stats.js" type="module"></script>
</body>
</html>