function initTheme(){const t=document.getElementById("theme-toggle");if(!t)return;const e=localStorage.getItem("theme")||"auto";document.body.className=`theme-${e}`,updateThemeIcon(),t.addEventListener("click",(function(){let t;const e=localStorage.getItem("theme")||"auto";t="auto"===e?"dark":"dark"===e?"light":"auto",localStorage.setItem("theme",t),document.body.className=`theme-${t}`,updateThemeIcon()}))}function updateThemeIcon(){const t=document.querySelector("#theme-toggle i");if(!t)return;const e=localStorage.getItem("theme")||"auto";t.className="auto"===e?"fas fa-adjust":"dark"===e?"fas fa-moon":"fas fa-sun"}function initSidebarToggle(){const t=document.getElementById("sidebar-toggle"),e=document.querySelector(".sidebar"),n=document.querySelector(".main-content");if(!t||!e||!n)return;let a;"true"===localStorage.getItem("sidebarCollapsed")?(e.classList.add("collapsed"),n.style.marginLeft="0"):(e.classList.remove("collapsed"),n.style.marginLeft="240px"),t.addEventListener("click",(function(){const t=e.classList.toggle("collapsed");localStorage.setItem("sidebarCollapsed",t),n.style.marginLeft=t?"0":"240px"})),window.addEventListener("resize",(function(){document.body.classList.add("resize-animation-stopper"),clearTimeout(a),a=setTimeout((()=>{document.body.classList.remove("resize-animation-stopper")}),400)}))}function initNavigation(){const t=document.querySelectorAll(".sidebar-nav a"),e=document.querySelectorAll(".content-section"),n=document.getElementById("page-title");if(!t.length||!e.length||!n)return;const a=function(t,e){let n;return function(...a){const o=this;clearTimeout(n),n=setTimeout((()=>t.apply(o,a)),e)}}((function(t,a){e.forEach((t=>{t.classList.remove("active"),t.style.display="none"}));const o=document.getElementById(`${t}-section`);o&&(o.classList.add("active"),o.style.display="block",n.textContent=a)}),50);t.forEach((e=>{e.addEventListener("click",(function(e){if(e.preventDefault(),this.classList.contains("active"))return;t.forEach((t=>t.classList.remove("active"))),this.classList.add("active");const n=this.getAttribute("data-section"),o=this.querySelector("span").textContent;a(n,o)}))}))}async function loadDashboardData(){try{const t={totalArticles:24,totalChats:152,totalFiles:37,lastUpdate:"2023-10-15"};document.getElementById("total-articles").textContent=t.totalArticles,document.getElementById("total-chats").textContent=t.totalChats,document.getElementById("total-files").textContent=t.totalFiles,document.getElementById("last-update").textContent=formatDate(t.lastUpdate);const e=[{title:"探索人工智能的未来发展",date:"2023-10-10"},{title:"云计算技术在现代企业中的应用",date:"2023-09-28"},{title:"大数据分析:挑战与机遇",date:"2023-09-15"}],n=document.getElementById("recent-articles");n.innerHTML="",e.forEach((t=>{const e=document.createElement("li");e.innerHTML=`\n                <span class="item-title">${t.title}</span>\n                <span class="item-date">${formatDate(t.date)}</span>\n            `,n.appendChild(e)}));const a=[{user:"访客123",preview:"你好，我想了解更多关于人工智能的信息",date:"2023-10-14"},{user:"访客456",preview:"这篇文章写得很好，我有一些问题想请教",date:"2023-10-12"},{user:"访客789",preview:"你能推荐一些关于数据科学的资源吗?",date:"2023-10-09"}],o=document.getElementById("recent-chats");o.innerHTML="",a.forEach((t=>{const e=document.createElement("li");e.innerHTML=`\n                <span class="item-title">${t.user}: ${t.preview}</span>\n                <span class="item-date">${formatDate(t.date)}</span>\n            `,o.appendChild(e)}))}catch(t){}}async function loadArticles(){try{const t=[{id:1,title:"探索人工智能的未来发展",date:"2023-10-10",readTime:"10分钟",status:"已发布"},{id:2,title:"云计算技术在现代企业中的应用",date:"2023-09-28",readTime:"15分钟",status:"已发布"},{id:3,title:"大数据分析:挑战与机遇",date:"2023-09-15",readTime:"12分钟",status:"草稿"},{id:4,title:"物联网如何改变我们的生活",date:"2023-09-05",readTime:"8分钟",status:"已发布"},{id:5,title:"区块链技术的应用场景",date:"2023-08-20",readTime:"20分钟",status:"已发布"}],e=document.getElementById("articles-tbody");e.innerHTML="",t.forEach((t=>{const n=document.createElement("tr");n.innerHTML=`\n                <td>${t.title}</td>\n                <td>${formatDate(t.date)}</td>\n                <td>${t.readTime}</td>\n                <td>\n                    <span class="status-badge ${"已发布"===t.status?"published":"draft"}">\n                        ${t.status}\n                    </span>\n                </td>\n                <td>\n                    <div class="article-actions">\n                        <button class="edit-btn" data-id="${t.id}">\n                            <i class="fas fa-edit"></i>\n                        </button>\n                        <button class="delete-btn" data-id="${t.id}">\n                            <i class="fas fa-trash"></i>\n                        </button>\n                    </div>\n                </td>\n            `,e.appendChild(n)})),document.querySelectorAll(".edit-btn").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-id");window.location.href=`editor.html?id=${t}`}))})),document.querySelectorAll(".delete-btn").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-id");confirm("确定要删除这篇文章吗?")&&deleteArticle(t)}))}))}catch(t){}}async function deleteArticle(t){try{document.querySelector(`.delete-btn[data-id="${t}"]`).closest("tr").remove(),alert("文章已成功删除!")}catch(t){alert("删除文章时出错，请稍后再试")}}async function loadProfileData(){try{const t={name:"名",bio:"初三学生，热爱技术和创新，专注于绘画、文字排版，人工智能、云计算和大数据领域的研究与应用。喜欢探索新技术，用代码创造美好的数字世界。",focus:"绘画，文字排版，人工智能，编程，云计算，大数据",email:"lkm836972@outlook.com",socialLinks:[{platform:"github",url:"https://github.com/LKM-lkm"},{platform:"twitter",url:"https://twitter.com/moonlight"},{platform:"weixin",url:"likeme2010Ming"}]};document.getElementById("profile-name").value=t.name,document.getElementById("profile-bio").value=t.bio,document.getElementById("profile-focus").value=t.focus,document.getElementById("profile-email").value=t.email;const e=document.querySelector(".social-links-editor");e.innerHTML="",t.socialLinks.forEach((t=>{const n=document.createElement("div");n.className="social-link-item",n.innerHTML=`\n                <select class="social-platform">\n                    <option value="github" ${"github"===t.platform?"selected":""}>GitHub</option>\n                    <option value="twitter" ${"twitter"===t.platform?"selected":""}>Twitter</option>\n                    <option value="weixin" ${"weixin"===t.platform?"selected":""}>微信</option>\n                    <option value="weibo" ${"weibo"===t.platform?"selected":""}>微博</option>\n                </select>\n                <input type="text" class="social-url" value="${t.url}" placeholder="链接地址">\n                <button type="button" class="remove-social-btn">\n                    <i class="fas fa-times"></i>\n                </button>\n            `,e.appendChild(n)}));const n=document.createElement("button");n.type="button",n.id="add-social-btn",n.className="btn secondary-btn",n.innerHTML='<i class="fas fa-plus"></i> 添加链接',e.appendChild(n),n.addEventListener("click",(function(){addSocialLinkItem()})),document.querySelectorAll(".remove-social-btn").forEach((t=>{t.addEventListener("click",(function(){this.closest(".social-link-item").remove()}))}))}catch(t){}}function addSocialLinkItem(){const t=document.querySelector(".social-links-editor"),e=document.getElementById("add-social-btn"),n=document.createElement("div");n.className="social-link-item",n.innerHTML='\n        <select class="social-platform">\n            <option value="github">GitHub</option>\n            <option value="twitter">Twitter</option>\n            <option value="weixin">微信</option>\n            <option value="weibo">微博</option>\n        </select>\n        <input type="text" class="social-url" placeholder="链接地址">\n        <button type="button" class="remove-social-btn">\n            <i class="fas fa-times"></i>\n        </button>\n    ',t.insertBefore(n,e),n.querySelector(".remove-social-btn").addEventListener("click",(function(){n.remove()}))}async function loadChatbotData(){try{const t={name:"月光助手",greeting:"你好!我是月光助手,很高兴为你解答问题。",personality:"friendly"};document.getElementById("chatbot-name").value=t.name,document.getElementById("chatbot-greeting").value=t.greeting,document.getElementById("chatbot-personality").value=t.personality;const e=[{id:1,user:"访客123",date:"2023-10-14 15:30",messages:[{sender:"user",content:"你好，我想了解更多关于人工智能的信息"},{sender:"bot",content:"你好!很高兴为你介绍人工智能。人工智能是计算机科学的一个分支，致力于创造能够模拟人类智能行为的系统。它包括机器学习、自然语言处理、计算机视觉等多个领域。你对哪个方面特别感兴趣?"}]},{id:2,user:"访客456",date:"2023-10-12 09:45",messages:[{sender:"user",content:"这篇文章写得很好，我有一些问题想请教"},{sender:"bot",content:"谢谢你的赞赏!我很乐意回答你的问题。请问你具体想了解什么?"}]},{id:3,user:"访客789",date:"2023-10-09 17:20",messages:[{sender:"user",content:"你能推荐一些关于数据科学的资源吗?"},{sender:"bot",content:'当然可以!对于数据科学，我推荐以下资源：1. Kaggle平台 - 提供数据集和竞赛；2. DataCamp - 交互式学习平台；3. "Python for Data Analysis"这本书；4. Coursera上的"Data Science Specialization"课程。这些资源涵盖了不同难度级别，希望能对你有所帮助!'}]}],n=document.getElementById("chat-list");n.innerHTML="",e.forEach((t=>{const e=document.createElement("div");e.className="chat-item",e.dataset.id=t.id;const a=t.messages.find((t=>"user"===t.sender))?.content||"";e.innerHTML=`\n                <div class="chat-item-header">\n                    <h4>${t.user}</h4>\n                    <span class="chat-date">${t.date}</span>\n                </div>\n                <div class="chat-preview">${a}</div>\n                <button class="view-chat-btn btn secondary-btn">查看完整对话</button>\n            `,n.appendChild(e)})),document.querySelectorAll(".view-chat-btn").forEach((t=>{t.addEventListener("click",(function(){viewChatDetail(this.closest(".chat-item").dataset.id,e)}))}))}catch(t){}}function viewChatDetail(t,e){const n=e.find((e=>e.id==t));if(!n)return;const a=document.createElement("div");a.className="modal",a.innerHTML=`\n        <div class="modal-content glass-panel">\n            <div class="modal-header">\n                <h3>与 ${n.user} 的对话</h3>\n                <button class="close-modal-btn"><i class="fas fa-times"></i></button>\n            </div>\n            <div class="modal-body">\n                <div class="chat-messages">\n                    ${n.messages.map((t=>`\n                        <div class="chat-message ${t.sender}">\n                            <div class="message-content">\n                                <p>${t.content}</p>\n                            </div>\n                        </div>\n                    `)).join("")}\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button class="btn primary-btn delete-chat-btn" data-id="${t}">\n                    <i class="fas fa-trash"></i> 删除对话\n                </button>\n                <button class="btn secondary-btn close-btn">关闭</button>\n            </div>\n        </div>\n    `,document.body.appendChild(a),a.querySelector(".close-modal-btn").addEventListener("click",(function(){a.remove()})),a.querySelector(".close-btn").addEventListener("click",(function(){a.remove()})),a.querySelector(".delete-chat-btn").addEventListener("click",(function(){const t=this.getAttribute("data-id");confirm("确定要删除这个对话吗?")&&(deleteChat(t),a.remove())}))}async function deleteChat(t){try{const e=document.querySelector(`.chat-item[data-id="${t}"]`);e&&e.remove(),alert("聊天记录已成功删除!")}catch(t){alert("删除聊天记录时出错，请稍后再试")}}function formatDate(t){const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}document.addEventListener("DOMContentLoaded",(function(){initTheme(),initSidebarToggle(),initNavigation(),document.getElementById("dashboard-section")&&loadDashboardData(),document.getElementById("articles-section")&&loadArticles(),document.getElementById("profile-section")&&loadProfileData(),document.getElementById("chatbot-section")&&loadChatbotData(),document.getElementById("year").textContent=(new Date).getFullYear();const t=document.createElement("style");t.innerHTML="\n        .resize-animation-stopper * {\n            animation: none !important;\n            transition: none !important;\n        }\n    ",document.head.appendChild(t)}));