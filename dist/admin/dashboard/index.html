<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>仪表盘 - Moonlight</title>
    <!-- 引用 Admin CSS -->
    <link rel="stylesheet" href="/assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- 引用 Admin JS -->
    <script src="/assets/js/dashboard.js"></script>
    <!-- 可以在这里添加仪表盘特定的 CSS 或 JS -->
</head>
<body>
    <!-- 星空背景 -->
    <div class="stars-container">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>

    <!-- 云朵背景 -->
    <div class="clouds">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
    </div>

    <div class="admin-layout">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-moon"></i>
                    <span>Moonlight</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active">
                        <a href="/admin/dashboard/"><i class="fas fa-chart-line"></i><span>仪表盘</span></a>
                    </li>
                    <li>
                        <a href="/admin/views/articles.html"><i class="fas fa-file-alt"></i><span>文章管理</span></a>
                    </li>
                    <li>
                        <a href="/admin/views/comments.html"><i class="fas fa-comments"></i><span>评论管理</span></a>
                    </li>
                    <li>
                        <a href="/admin/views/users.html"><i class="fas fa-users"></i><span>用户管理</span></a>
                    </li>
                    <li>
                        <a href="/admin/settings.html"><i class="fas fa-cog"></i><span>系统设置</span></a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 顶部导航 -->
            <header class="main-header">
                <div class="header-left">
                    <button class="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="搜索...">
                    </div>
                    <div class="user-menu">
                        <img src="/assets/images/avatar.jpg" alt="用户头像" class="avatar">
                        <div class="dropdown-menu">
                            <a href="/admin/profile.html"><i class="fas fa-user"></i> 个人资料</a>
                            <a href="/" target="_blank"><i class="fas fa-home"></i> 返回主页</a>
                            <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> 退出登录</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 统计卡片 -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon visitors">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-info">
                        <h3>--</h3>
                        <p>今日访问</p>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>--</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon articles">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="stat-info">
                        <h3>--</h3>
                        <p>文章总数</p>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>--</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon comments">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="stat-info">
                        <h3>--</h3>
                        <p>新增评论</p>
                        <div class="trend down">
                            <i class="fas fa-arrow-down"></i>
                            <span>--</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon users">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>--</h3>
                        <p>注册用户</p>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>--</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 图表区域 -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="chart-header">
                        <h2>访问统计</h2>
                        <div class="chart-actions">
                            <button class="active">日</button>
                            <button>周</button>
                            <button>月</button>
                        </div>
                    </div>
                    <div class="chart" id="visitors-chart"></div>
                </div>
                <div class="chart-container">
                    <div class="chart-header">
                        <h2>用户增长</h2>
                        <div class="chart-actions">
                            <button class="active">日</button>
                            <button>周</button>
                            <button>月</button>
                        </div>
                    </div>
                    <div class="chart" id="users-chart"></div>
                </div>
            </div>

            <!-- 最近活动 -->
            <div class="recent-activities">
                <div class="section-header">
                    <h2>最近活动</h2>
                    <a href="#" class="view-all">查看全部</a>
                </div>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-content">
                            <p>暂无活动记录</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 移动端菜单切换
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('show');
        });

        // 用户菜单交互逻辑
        const userMenu = document.querySelector('.user-menu');
        const dropdownMenu = document.querySelector('.dropdown-menu');
        let menuTimeout;

        // 鼠标进入用户菜单区域
        userMenu.addEventListener('mouseenter', function() {
            clearTimeout(menuTimeout);
            dropdownMenu.style.opacity = '1';
            dropdownMenu.style.visibility = 'visible';
            dropdownMenu.style.transform = 'translateY(0)';
        });

        // 鼠标离开用户菜单区域
        userMenu.addEventListener('mouseleave', function() {
            menuTimeout = setTimeout(() => {
                dropdownMenu.style.opacity = '0';
                dropdownMenu.style.visibility = 'hidden';
                dropdownMenu.style.transform = 'translateY(-10px)';
            }, 100); // 100ms 延迟，给用户时间移动到菜单上
        });

        // 鼠标进入下拉菜单
        dropdownMenu.addEventListener('mouseenter', function() {
            clearTimeout(menuTimeout);
        });

        // 鼠标离开下拉菜单
        dropdownMenu.addEventListener('mouseleave', function() {
            dropdownMenu.style.opacity = '0';
            dropdownMenu.style.visibility = 'hidden';
            dropdownMenu.style.transform = 'translateY(-10px)';
        });

        // 这里可以添加图表初始化代码
        
        // 动态加载仪表盘数据
        function loadDashboardData() {
            // 模拟从后端 API 获取数据
            const stats = {
                visitors: { count: 0, trend: 0 },
                articles: { count: 2, trend: 0 },
                comments: { count: 0, trend: 0 },
                users: { count: 1, trend: 0 }
            };
            
            // 更新统计卡片
            updateStatsCards(stats);
            
            // 更新最近活动
            updateRecentActivities();
            
            console.log('仪表盘数据加载完成');
        }
        
        function updateStatsCards(stats) {
            // 更新访问量
            const visitorsCard = document.querySelector('.stat-card:nth-child(1) .stat-info h3');
            const visitorsTrend = document.querySelector('.stat-card:nth-child(1) .trend span');
            visitorsCard.textContent = stats.visitors.count;
            visitorsTrend.textContent = stats.visitors.trend + '%';
            
            // 更新文章数
            const articlesCard = document.querySelector('.stat-card:nth-child(2) .stat-info h3');
            const articlesTrend = document.querySelector('.stat-card:nth-child(2) .trend span');
            articlesCard.textContent = stats.articles.count;
            articlesTrend.textContent = stats.articles.trend + '%';
            
            // 更新评论数
            const commentsCard = document.querySelector('.stat-card:nth-child(3) .stat-info h3');
            const commentsTrend = document.querySelector('.stat-card:nth-child(3) .trend span');
            commentsCard.textContent = stats.comments.count;
            commentsTrend.textContent = stats.comments.trend + '%';
            
            // 更新用户数
            const usersCard = document.querySelector('.stat-card:nth-child(4) .stat-info h3');
            const usersTrend = document.querySelector('.stat-card:nth-child(4) .trend span');
            usersCard.textContent = stats.users.count;
            usersTrend.textContent = stats.users.trend + '%';
        }
        
        function updateRecentActivities() {
            const activityList = document.querySelector('.activity-list');
            const activities = [
                {
                    type: 'system',
                    content: '系统初始化完成',
                    time: '刚刚'
                },
                {
                    type: 'article',
                    content: '博客系统部署成功',
                    time: '1小时前'
                }
            ];
            
            if (activities.length === 0) {
                activityList.innerHTML = '<div class="activity-item"><div class="activity-content"><p>暂无活动记录</p></div></div>';
                return;
            }
            
            activityList.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon ${activity.type}">
                        <i class="fas fa-${activity.type === 'system' ? 'cog' : 'file-alt'}"></i>
                    </div>
                    <div class="activity-content">
                        <p>${activity.content}</p>
                        <span class="time">${activity.time}</span>
                    </div>
                </div>
            `).join('');
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            initSearch();
        });

        // 搜索功能
        function initSearch() {
            const searchInput = document.querySelector('.search-box input');
            const searchBtn = document.querySelector('.search-box i');
            
            searchBtn.addEventListener('click', function() {
                performSearch(searchInput.value);
            });
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch(searchInput.value);
                }
            });
        }
        
        function performSearch(query) {
            if (query.trim()) {
                // 这里可以添加搜索逻辑
                console.log('搜索:', query);
                alert('搜索功能: ' + query);
            }
        }
        
        // 退出登录功能
        function logout() {
            if (confirm('确定要退出登录吗？')) {
                // 这里可以添加退出登录的逻辑
                console.log('用户退出登录');
                alert('退出登录成功！');
                // 可以重定向到登录页面
                // window.location.href = '/admin/login.html';
            }
        }
    </script>
</body>
</html> 